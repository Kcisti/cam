<!DOCTYPE HTML>
<html>
	<head>
		<title> cam </title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
		<script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<style>
    *{
       font-family: 'Roboto', sans-serif;
     }
		.body{
		  background-color: #000000;
		  overflow: hidden;
		}
		#cam_live{
		  -webkit-transform:scaleX(-1);
		  transform:scaleX(-1);
		  display: block;
		  margin-top: 0px;
		  margin-bottom: 200px;
		}
		#cam_capture{
		  width: 190px;
		  height: 190px;
		  background-color: #909090;
		  border: 10px solid #FFFFFF;
		  outline: none;
		  border-radius: 50%;
		}
		#camdown_canvas{
		  -webkit-transform:scaleX(-1);
		  transform:scaleX(-1);
		  display: block;
		  margin: 0px;
		  margin-bottom: 200px;
		  float: center;
		}

		</style>
	</head>

<body class="body">
	<center><div id="cam">
    <video autoplay="true" id="cam_live" width="900" height="1200"></video>
    <center><button id="cam_capture"></button><center>
  </div></center>
  <center><div id="camdown">
    <canvas id="camdown_canvas" width="900" height="1200"></canvas>
  </div></center>
</body>

<script>
document.getElementById("camdown").style.display="none";
async function getWebCam(){
		try{
				const videoSrc=await navigator.mediaDevices.getUserMedia({video:true});
				var video=document.getElementById("cam_live");
				video.srcObject=videoSrc;
		}catch(e){
				console.log(e);
		}
}
getWebCam();
var capture=document.getElementById("cam_capture");
var canvas=document.getElementById("camdown_canvas");
var context=canvas.getContext('2d');
var video=document.getElementById("cam_live");
capture.addEventListener("click",function(){
	document.getElementById('cam').style.display="none";
	document.getElementById("camdown").style.display="block";
		context.drawImage(video,0,0,900,1200);
		download();
});
function download(){
	// Convert canvas to image
	var dataURL = canvas.toDataURL("image/jpeg", 1.0);
	downloadImage(dataURL, '587498.jpeg');
	// Save | Download image
	function downloadImage(data, filename = 'untitled.jpeg') {
		var a = document.createElement('a');
		a.href = data;
		a.download = filename;
		document.body.appendChild(a);
		a.click();
	}
}
</script>
</html>
